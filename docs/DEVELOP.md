
## Developing

Developed on Go version 1.14+

Clone the repo and create a `.env.local` for an easy config setup. Use the `debug` flag to disable auth.

I recommend not using the production environment for testing and recommend running postgres and rabbitmq in Docker.

Updating the DB schema use `goose` to migrate safely.

When ran with the `debug` flag set to true. 500 server errors will be returned to the browser, not just logged. Otherwise it will only return the 500 code and not not the actual error.

Try to keep all "business" logic with in the `/services` and try to keep the imports local to that package, but you'll probably need the `utils` package but we're trying to keep it modular so web-api can theoretically be split up and keeping it seperate would likely make it a lot easier.

### Layout

> For further reading checkout the [architecture](Misc/architecture.md) document.

- `/configs`  
  Example configurations.
- `/controllers`  
  Internal API to REST API.
- `/docs`  
  echo-swagger autogenerated docs.
- `/middleware`  
  REST middleware, implements some URL sanitisation and logging.
- `/routes`  
  Handles how the REST api is arranged and applies extra middleware if necessary.
- `/services`  
  Internal API that is the main "business logic" for each service web-api provides.
- `/utils`  
  Provides access to commonly used functions, i.e. cdn, mq, sql

### Database info

This is currently build using the new schema available in the [planning repo](github.com/ystv/Website2ElectricBoogaloo), it is still lacking functionality compared to the current implementation.

### Jenkins

Check out this [guide to CI](Misc/ci.md).
